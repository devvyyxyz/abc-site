<header class="floating-nav">
  <div class="nav-inner">
    <a
      class="logo"
      href="{{ '/' | relative_url }}"
      style="display: flex; align-items: center; gap: 8px"
      aria-label="{{ site.site.name }}"
    >
      <img
        src="{{ site.site.logo | relative_url }}"
        alt="{{ site.site.name }}"
        style="height: 32px; width: auto"
      />
      {% unless site.site.logo %}<span>{{ site.site.name }}</span>{% endunless
      %}
    </a>
    <button
      class="mobile-menu-toggle"
      aria-label="Toggle menu"
      id="mobile-menu-toggle"
    >
      <i class="fas fa-bars"></i>
    </button>
    <nav class="links" id="mobile-nav">
      <a href="{{ '/' | relative_url }}">Home</a>
      <a href="{{ '/about/' | relative_url }}">About</a>
      <a href="{{ '/docs/' | relative_url }}">Docs</a>
      <a href="{{ '/changelog/' | relative_url }}">Changelog</a>
      <a href="{{ '/blog/' | relative_url }}">Blog</a>
      <div class="nav-dropdown">
        <a href="{{ '/projects/' | relative_url }}" class="dropdown-toggle">
          Projects <i class="fas fa-chevron-down"></i>
        </a>
        <div class="dropdown-menu">
          <a href="{{ '/projects/' | relative_url }}">All Projects</a>
          <a href="{{ '/compare/' | relative_url }}"
            ><i class="fas fa-balance-scale"></i> Compare Modpacks</a
          >
          <a href="{{ '/changelog/' | relative_url }}"
            ><i class="fas fa-rocket"></i> Releases & Changelog</a
          >
        </div>
      </div>
      <a
        href="{{ site.modrinth.organization_url | default: site.social.modrinth }}"
        target="_blank"
        rel="noopener"
        >Organization</a
      >
    </nav>
    <div class="nav-actions">
      <div
        id="social-links-nav"
        style="display: flex; gap: 6px; align-items: center"
      ></div>
      {% include theme-controls.html %}
    </div>
  </div>
</header>

<script>
  // Mobile menu toggle
  document.addEventListener("DOMContentLoaded", () => {
    const toggle = document.getElementById("mobile-menu-toggle");
    const nav = document.getElementById("mobile-nav");

    if (toggle && nav) {
      toggle.addEventListener("click", () => {
        nav.classList.toggle("mobile-open");
        const icon = toggle.querySelector("i");
        if (nav.classList.contains("mobile-open")) {
          icon.classList.remove("fa-bars");
          icon.classList.add("fa-times");
        } else {
          icon.classList.remove("fa-times");
          icon.classList.add("fa-bars");
        }
      });

      // Close menu when clicking a link
      nav.querySelectorAll("a").forEach((link) => {
        link.addEventListener("click", () => {
          nav.classList.remove("mobile-open");
          const icon = toggle.querySelector("i");
          icon.classList.remove("fa-times");
          icon.classList.add("fa-bars");
        });
      });

      // Close menu when clicking outside
      document.addEventListener("click", (e) => {
        if (!toggle.contains(e.target) && !nav.contains(e.target)) {
          nav.classList.remove("mobile-open");
          const icon = toggle.querySelector("i");
          icon.classList.remove("fa-times");
          icon.classList.add("fa-bars");
        }
      });
    }
  });
</script>
