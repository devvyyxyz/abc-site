<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
        xmlns:image="http://www.google.com/schemas/sitemap-image/1.1"
        xmlns:mobile="http://www.google.com/schemas/sitemap-mobile/1.0">

  <!-- Homepage (highest priority) -->
  <url>
    <loc>{{ site.url | default: site.baseurl }}/</loc>
    <lastmod>{{ site.time | date_to_xmlschema }}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>1.0</priority>
  </url>

  <!-- Main Pages -->
  {% for page in site.pages %}
    {% if page.url != "/404.html" and page.url != "/" and page.url != "/sitemap.xml" %}
    <url>
      <loc>{{ page.url | absolute_url }}</loc>
      <lastmod>{{ site.time | date_to_xmlschema }}</lastmod>
      <changefreq>
        {% if page.url == "/projects/" or page.url == "/changelog/" %}weekly
        {% elsif page.url == "/docs/" %}monthly
        {% else %}monthly{% endif %}
      </changefreq>
      <priority>
        {% if page.url == "/projects/" %}0.9
        {% elsif page.url == "/docs/" or page.url == "/about/" %}0.8
        {% elsif page.url == "/privacy/" or page.url == "/terms/" or page.url == "/contact/" %}0.5
        {% else %}0.6{% endif %}
      </priority>
    </url>
    {% endif %}
  {% endfor %}

  <!-- Documentation Pages -->
  {% for doc in site.docs %}
  <url>
    <loc>{{ doc.url | absolute_url }}</loc>
    <lastmod>{{ doc.date | default: site.time | date_to_xmlschema }}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.7</priority>
  </url>
  {% endfor %}

  <!-- Project Pages (from mods.json data) -->
  {% if site.data.mods %}
    {% for mod in site.data.mods limit: 500 %}
    <url>
      <loc>{{ site.url | default: site.baseurl }}/projects/{{ mod.slug | default: mod.title | slugify }}/</loc>
      <lastmod>{{ mod.updated | default: site.time | date_to_xmlschema }}</lastmod>
      <changefreq>weekly</changefreq>
      <priority>0.8</priority>
      {% if mod.icon_url %}
      <image:image>
        <image:loc>{{ mod.icon_url }}</image:loc>
        <image:title>{{ mod.title }}</image:title>
      </image:image>
      {% endif %}
    </url>
    {% endfor %}
  {% endif %}

</urlset>
